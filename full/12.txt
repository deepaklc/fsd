12. Develop a registration page for student enrolment as done in Module 2 but without page
refresh using AJAX.
Register your app in settings.py
Urls.py – Project level

from django.contrib import admin
from django.urls import path,include
urlpatterns = [
path('admin/', admin.site.urls),
path('',include('myapp.urls'))
]

Urls.py – App level
from django.contrib import admin
from django.urls import path, re_path
from .views import regaj
urlpatterns = [
path('regaj/',regaj),
]

Models.py
from django.db import models
# Create your models here.
class Course(models.Model):
	course_code=models.CharField(max_length=40)
	course_name=models.CharField(max_length=100)
	course_credits=models.IntegerField()
	def __str__(self):
		return self.course_name
class Student(models.Model):
	student_usn=models.CharField(max_length=20)
	student_name=models.CharField(max_length=100)
	student_sem=models.IntegerField()
	enrolment=models.ManyToManyField(Course)
	def __str__(self):
		return self.student_name+"("+self.student_usn+")"

admin.py
from django.contrib import admin
from .models import Student, Course
admin.site.register(Student)
admin.site.register(Course)

views.py
from django.http import HttpResponse
from django.shortcuts import render
from myapp.models import Course, Student
def regaj(request):
	if request.method == "POST":
		sid=request.POST.get("sname")
		cid=request.POST.get("cname")
		student=Student.objects.get(id=sid)
		course=Course.objects.get(id=cid)
		res=student.enrolment.filter(id=cid)
		if res:
		return HttpResponse("<h1>Student already enrolled</h1>")
	student.enrolment.add(course)
	return HttpResponse("<h1>Student enrolled successfully</h1>")
	else:
		students=Student.objects.all()
		courses=Course.objects.all()
		return
render(request,"regaj.html",{"students":students,"courses":courses})
D:\FSD_lab_2024\lab12_new\myapp\templates\regaj.html

html>
<body>
<form method="post" action="">
{% csrf_token %}
Student Name
<select name="sname" id="sname">
{%for student in students %}
<option value="{{student.id}}">{{student.student_name}}</option>
{% endfor %}
</select><br>
Course Name
<select name="cname" id="cname">
{%for course in courses %}
<option value="{{course.id}}">{{course.course_name}}</option>
{% endfor %}

</select><br>
<span id="ans"></span>
<input type="button" value="Enroll" id="ebtn">
</form>
<script
src='https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js'></scrip
t>
<script>
$(document).ready(function(){
$("#ebtn").click(function(){
var sname = $("#sname").val();
var cname = $("#cname").val();
$.ajax({
type: "POST",
url: "/regaj/",
data: {sname: sname, cname: cname,
csrfmiddlewaretoken:"{{ csrf_token}}"
},
success: function(response){
$("#ans").html(response)
}
});
});
});
</script>
</body>
</html>
>Python manage.py makemigrations
>python manage.py migrate
>python manage.py createsuperuser
Add data to Course model
Add data to Student model
>python manage.py runserver
